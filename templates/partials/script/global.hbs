{{!< default}}
{{!-- 
/**
 * Uncertainty Project
 * Developed by Engagement Lab, 2016
 * ==============
 * 
 * Script include for global logic
 * ==========
 */
--}}

<script type="text/javascript">

$(document).ready(function() {

	$('#tinderslide').jTinder({
		onTrash: function (item) {
        alert('Trash image ' + (item.index()+1));
    },
    onRecycle: function (item) {
        alert('Recycle image ' + (item.index()+1));
    },
    animationRevertSpeed: 200,
    animationSpeed: 400,
    threshold: 1,
    likeSelector: '#recycle',
    dislikeSelector: '#trash'
  });

	// If a player chooses to trash an item
  $('#trash').click(function() {
		
  });

  // If a player chooses to recycle
  $('#recycle').click(function() {
  	$('#tinderslide').jTinder('recycle');
  });

  // Swipe Functionality -- ADD IN

  // Bind the swipeHandler callback function to the swipe event on div.box
  $( "div.box" ).on( "swipe", swipeHandler );
 
  // Callback function references the event target and adds the 'swipe' class to it
  function swipeHandler( event ){
    $( event.target ).addClass( "swipe" );
  }

});






// Leftover Code -- Will Be Removed Later




	// var timeline = new TimelineMax();
	$(document).ready(function() {

		// Menu toggling
	  $("#menu-close").click(function(e) {
	    e.preventDefault();
	    $("#sidebar-wrapper").toggleClass("active");
	  });
	  $("#menu-toggle").click(function(e) {
	    e.preventDefault();
	    $("#sidebar-wrapper").toggleClass("active");
	  });

	  {{#ifeq section "index"}}

		  // Blurring/no blur
		  $('.category').hover(
		  	function () {
			    $(this).children('.bg').removeClass("blur");
			    $(this).children('.content').addClass("transparent");
			  },
			  function () {
			    $(this).children('.bg').addClass("blur");
			    $(this).children('.content').removeClass("transparent");
			  }
		  );
			var timeline = TweenMax.to({}, 5, 
			{
				repeat: -1,
				yoyo: true,
				onRepeat:function(){
					timeline.duration(Math.floor(Math.random() * (10 - 1 + 1)) + 1)
				},
			  onUpdateParams:["{self}"],
			  onUpdate:function(tl){

			    var tlp = (tl.progress()*9);
			    TweenMax.set('#blurred',{'-webkit-filter':'blur(' + tlp + 'px' + ')','filter':'blur(' + tlp + 'px' + ')'});
			  }
			});

		{{/ifeq}}

		{{#ifeq section "category"}}

      $("#title").lettering('words');

      // display image caption on top of image
			$("#body img").each(function() {
					$(this).wrap('<figure class="image"></figure>')
			    var imageCaption = $(this).attr("alt");
			    if (imageCaption != '') {
			        $("<figcaption>" + imageCaption +"</figure>").insertAfter(this);
			    }
			});

		{{/ifeq}}

	});
	
</script>