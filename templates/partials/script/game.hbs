	// GAME LOGIC
	var levelItems;

	$('.levels [data-level]').click(function(evt) {

		console.log($(this).data('level'));
		StartLevel($(this).data('level'));

	});

	var points = 0;

	$('#tinderslide').jTinder({
		onDislike: function (item) {
			$(item).addClass('gone');
	        CheckTrash(item);
	    },
	    onLike: function (item) {
	    	$(item).addClass('gone');
	        CheckRecycle(item);
	    },
	    animationRevertSpeed: 200,
	    animationSpeed: 400,
	    threshold: 1,
	    likeSelector: '#recycle',
	    dislikeSelector: '#trash'
	});

	// If a player chooses to trash an item
  $('#trash').click(function() {
  	$('#tinderslide').jTinder('dislike');
  });

  function CheckTrash(item) {
  	// check if item is trash
  	if (item.hasClass('Trash')) {
  		console.log('CORRECT - dis trash');
  		UpdateScore(1);
  	} else {
  		UpdateScore(-1);
  		console.log ('WRONG - dis recyclable');
  	}
  }

  // If a player chooses to recycle
  $('#recycle').click(function() {
  	$('#tinderslide').jTinder('like');
  });

  function CheckRecycle(item) {
  	// check if item is recyclable
  	if (item.hasClass('Recycle')) {
  		UpdateScore(1);
  		console.log('CORRECT - dis recyclable');

  	} else {
  		UpdateScore(-1);
  		console.log ('WRONG - dis trash');
  	}
  }

  // If a player chooses to compost
  $('#compost').click(function() {
  	var item = $('.item').last()
  	CheckCompost(item);
  	$(item).animate({
  		'top': "-1000px", 
  		'height': "200px"
  	}, 1000, function(){
  		console.log("done");
  	});
  });

  function CheckCompost(item) {
  	// check if item is recyclable
  	if (item.hasClass('Compost')) {
  		UpdateScore(1);
  		console.log('CORRECT - dis compost');

  	} else {
  		UpdateScore(-1);
  		console.log ('WRONG - dis something ELSe');
  	}
  }

  function StartLevel(num) {
  	// Fade in the game, out the profile
  	$('.profile').fadeOut(function(){
  		$('.game').fadeIn();
  		// Fade in the level
		$('.game').find(".level[data-level=" + num + "]").fadeIn(function(){
			$('ACTIVE').removeClass('ACTIVE');
			$(this).addClass('ACTIVE');

		});
  	});

  }

  function UpdateScore(num, leader) {
  	points = points + num;

  	if (leader) {
	  	// Send player data
	  	var data = {};
			data.id = "{{playerId}}";
			data.score = points;
			console.log(data);

	  	$.get("/api/update/", data, function(data){
	  		// Update player score on this end
	  		$('#points-counter').html(points);
		})
		.fail(function(err) {
		    alert( "error" + err );
		});
	} else {
		// Update player score
		$('#points-counter').html(points);
	}

  }

  // 

